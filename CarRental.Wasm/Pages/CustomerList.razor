@page "/customer"
@using CarRental.Shared.Entities
@using MudBlazor.Extensions
@using CarRental.Business
@inject BookingProcessor BProc

<PageTitle>Customers</PageTitle>

<CustomerForm RerenderList="@OnInitialized"/>

<MudTable Items="@Customers" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@(Customers == null)" LoadingProgressColor="Color.Info">
    <HeaderContent>
        <MudTh>Id</MudTh>
        <MudTh>SSN</MudTh>
        <MudTh>First Name</MudTh>
        <MudTh>Last Name</MudTh>
        <MudTh>Date of Birth</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Id">@context.Id</MudTd>
        <MudTd DataLabel="SSN">@context.SocialSecurityNumber</MudTd>
        <MudTd DataLabel="Name">@context.FirstName</MudTd>
        <MudTd DataLabel="Last Name">@context.LastName</MudTd>
        <MudTd DataLabel="Date Of birth" HideSmall="@true">@context.DateOfBirth.ToIsoDateString()</MudTd>
    </RowTemplate>
</MudTable>

@code{
    private IEnumerable<Customer>? Customers { get; set; }

    protected override void OnInitialized()
    {
        Customers = BProc.GetCustomers();
    }
}